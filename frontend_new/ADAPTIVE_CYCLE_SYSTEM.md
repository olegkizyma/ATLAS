# Система Адаптивних Циклів - Технічний Опис

## Огляд
Реалізована складна система циклів, яка динамічно адаптує поведінку виконання на основі поточного циклу та попереднього стану сесії.

## Ключові Компоненти

### 1. Стан Сесії
```javascript
const sessionCycleState = new Map(); 
// sessionId -> { cycleCount, usedTools, usedMSPs, lastState }
```

### 2. Режими Виконання
- **Цикл 1-2**: `normal` - стандартне виконання
- **Цикл 3**: `msp_specific` - обмеження до конкретних MSP серверів
- **Цикл 6**: `tool_specific` - фокус на конкретних інструментах

### 3. Відстеження Ресурсів
```javascript
function analyzeExecutionOutput(output, sessionId) {
  // Аналізує вивід Tetiana на предмет використаних інструментів та MSP
  // Оновлює sessionCycleState автоматично
}
```

### 4. Рекомендації Ресурсів
```javascript
function getRecommendedResources(sessionId, currentCycle) {
  // 3-й цикл: повертає топ-3 MSP з попереднього використання
  // 6-й цикл: повертає останні 3 інструменти
}
```

## Логіка Роботи

1. **Ініціалізація**: Кожна нова сесія створює запис у `sessionCycleState`
2. **Відстеження**: Після кожного виконання аналізується вивід і зберігаються використані ресурси
3. **Адаптація**: На циклах 3 та 6 система переходить у спеціалізовані режими
4. **Рекомендації**: Базуючись на попередньому використанні, система рекомендує конкретні ресурси

## Інтеграція

### Atlas (Планування)
- Отримує адаптивний контекст для коректування планів
- Враховує режим поточного циклу

### Grisha (Верифікація) 
- Генерує плани верифікації з урахуванням циклу
- Фокусується на MSP або інструментах відповідно до режиму

### Tetiana (Виконання)
- Отримує обмеження MSP або рекомендації інструментів
- Вивід автоматично аналізується для майбутніх циклів

## Переваги

1. **Без хардкодів**: Система повністю динамічна
2. **Самонавчання**: Базується на реальному використанні ресурсів
3. **Адаптивність**: Змінює стратегію залежно від циклу
4. **Універсальність**: Працює з будь-якими MSP та інструментами

## Файли
- `server.js`: Основна логіка адаптивної системи
- `intelligeich.json`: Промпти для агентів (без хардкодів)
- `.env`: Змінні середовища для універсальної підтримки провайдерів
